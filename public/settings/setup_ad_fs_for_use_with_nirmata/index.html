<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <title>Setup AD FS for use with Nirmata</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="generator" content="Hugo 0.74.3" />
  
  <!-- ** CSS Plugins Needed for the Project ** -->
  
  <!-- Bootstrap -->
  <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">

  <!-- themefy-icon -->
  <link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">

  <!--Favicon-->
  <link rel="icon" href="images/favicon.png" type="image/x-icon">

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
  
  <style>
  :root{
    --primary-color:#02007e;
    --body-color:#f9f9f9;
    --text-color:#636363;
    --text-color-dark:#242738;
    --white-color:#ffffff;
    --light-color:#f8f9fa;
    --font-family:Lato;
  }
  </style>

<!-- Main Stylesheet -->

<link href="/css/style.min.css" rel="stylesheet" media="screen"/>
  
<!-- ** JS Plugins Needed for the Project ** -->

<!-- jquiry -->
<script src="plugins/jquery/jquery-1.12.4.js"></script>

<!-- jquary ui -->
<script src="plugins/jquery/jquery-ui.js"></script>

<!-- Bootstrap JS -->
<script src="plugins/bootstrap/bootstrap.min.js"></script>

<!-- match-height JS -->
<script src="plugins/match-height/jquery.matchHeight-min.js"></script>



</head>
  
  <body>
    
    <!-- header -->
    <header class="shadow-bottom sticky-top bg-white">
      <nav class="navbar navbar-expand-md navbar-light">
  <div class="container">
    <a class="navbar-brand px-2" href="/">
      
      
      
      
      <img class="img-fluid" src="images/logo.png" alt="Nirmata">
      
      
    </a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="/">Home</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="/introduction">Introduction</a>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="/contact">contact</a>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            docs
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/installation">Installation</a>
            
            <a class="dropdown-item" href="/billing-pricing">Billing and Pricing</a>
            
            <a class="dropdown-item" href="/features">Features</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            settings
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/settings/enable_saml_sso_for_a_user">Enable SAML SSO for a User</a>
            
            <a class="dropdown-item" href="/settings/setup_ad_fs_for_use_with_nirmata/">Setup AD FS for use with Nirmata</a>
            
            <a class="dropdown-item" href="/settings/single_signon_with_saml/">Single Signon with SAML</a>
            
            <a class="dropdown-item" href="/settings/users_and_roles/">Users and roles</a>
            
          </div>
        </li>
        
        
      </ul>
      
    </div>
  </div>
</nav>
    </header>
    <!-- /header -->
    
    

<!-- details page -->
<section class="single section-sm pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="sidebar">
          <ul class="list-styled">
            
            <a class="back-btn" href="/"></a>
            
              
            
              
            
              
            
              
            
              
            
              
              








<li data-nav-id="/settings/" title="Settings" class="sidelist
  ">
  <a href="/settings/">
    Settings
  </a>
  
  
    <ul>
      
        
          








<li data-nav-id="/settings/users_and_roles/" title="Users and Roles" class="sidelist
  ">
  <a href="/settings/users_and_roles/">
    Users and Roles
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="/settings/single_signon_with_saml/" title="Single Sign-On with SAML" class="sidelist
  ">
  <a href="/settings/single_signon_with_saml/">
    Single Sign-On with SAML
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="/settings/using_ca_signed_saml_signature_certificates/" title="Using CA signed SAML Signature Certificates" class="sidelist
  ">
  <a href="/settings/using_ca_signed_saml_signature_certificates/">
    Using CA signed SAML Signature Certificates
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="/settings/enable_saml_sso_for_a_user/" title="Enable SAML SSO for a User" class="sidelist
  ">
  <a href="/settings/enable_saml_sso_for_a_user/">
    Enable SAML SSO for a User
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="/settings/setup_ad_fs_for_use_with_nirmata/" title="Setup AD FS for use with Nirmata" class="sidelist
  active">
  <a href="/settings/setup_ad_fs_for_use_with_nirmata/">
    Setup AD FS for use with Nirmata
  </a>
  
  
</li>


        
      
    </ul>
  
</li>


              
            
              
            
              
            
          </ul>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="p-lg-5 p-4 bg-white">
          <h2 class="mb-5">Setup AD FS for use with Nirmata</h2>
          
          <div class="content"><p>This section provides instructions on how to setup Microsoft AD FS
(Active Directory Federation Services) as a SAML Identity Provider
(IdP). Before you setup ADFS, you must first enable SAML SSO in Nirmata,
import the IdP Metadata into Nirmata, and export the SP Metadata. You
must also Copy or transfer the SP Metadata XML file to your AD FS
server.</p>
<p>Setting up ADFS involves three steps (the following steps use Windows
Server 2012 R2 and ADFS 3.0):</p>
<ol>
<li>Import the SP Metadata into ADFS</li>
</ol>
<p>On your ADFS host open the Server Manager tool and select the <strong>AD FS
Management</strong> option:</p>
<p><img src="/images/adfs-1.png" alt="image"></p>
<p>In the AD FS Management window, navigate to Trust Relationships -&gt;
Relying Part Trusts and select <strong>Add Relying Party Trust</strong> from the
right Actions panel:</p>
<p><img src="/images/adfs-2.png" alt="image"></p>
<p>Select the SP Metadata XML file that you exported from Nirmata:</p>
<p><img src="/images/adfs-3.png" alt="image"></p>
<p>Provide a Display Name:</p>
<p><img src="/images/adfs-4.png" alt="image"></p>
<p>If your organization used Multi-factor Authentication (MFA), you can
enable it. Otherwise, leave it disabled:</p>
<p><img src="/images/adfs-5.png" alt="image"></p>
<p>On the next screen, select <strong>Permit all users to access this relying
party</strong>:</p>
<p><img src="/images/adfs-6.png" alt="image"></p>
<p>Since we imported the SP settings from the Metadata file, simply click
next on the <strong>Ready to Add Trust</strong> screen:</p>
<p><img src="/images/adfs-7.png" alt="image"></p>
<p>Make sure that the <strong>Open the Edit Claim Rules dialog...</strong> option is
checked and close the wizard:</p>
<p><img src="/images/adfs-8.png" alt="image"></p>
<p>Proceed to configure a SAML claim below.</p>
<ol start="2">
<li>Setup a SAML Claim Rule for Nirmata</li>
</ol>
<p>Nirmata requires that the SAML Name ID field contain the email address
of the principal. You can enable this by configuring a SAML Claim Rule
in ADFS.</p>
<p>Click on <strong>Add Rule..</strong> to configure the claim:</p>
<p><img src="/images/adfs-9.png" alt="image"></p>
<p>Select <strong>Send LDAP Attributes as Claims</strong> and click next:</p>
<p><img src="/images/adfs-10.png" alt="image"></p>
<p>Enter a name for the claim rule, such as &ldquo;email address&rdquo;. Then select
<strong>Active Directory</strong> as the Atribute Store. In the mapping section,
select <strong>E-Mail-Addresses</strong> as the LDAP Attribute and <strong>Name ID</strong> as the
Outgoing Claim Type.</p>
<p><img src="/images/adfs-11.png" alt="image"></p>
<p>Click <strong>Finish</strong> to add the claim and then <strong>OK</strong> to exit the Edit Claim
Rules dialog.</p>
<ol start="3">
<li>Allow SAML signature certificates to be self-signed</li>
</ol>
<p>In a SAML message exchange, X.509 Certificates with public and private
key pairs are used to sign and encrypt the data. Since the keys are
exchanged via Metadata and the SAML messages are exchanged over a secure
(TLS) connection, there is no benefit in using CA signed certificates
for signing.</p>
<p>Nirmata generates self-signed certificates for SAML signatures and
encryption. You must setup AD FS to not require CA certificates for SAML
signing and encryption. You can manage these settings using PowerShell
as described below.</p>
<p>Check you current settings using the PowerShell command:</p>
<pre><code>Get-AdfsRelyingPartyTrust | Select-Object Identifier, SigningCertificateRevocationCheck, EncryptionCertificateRevocationCheck
</code></pre>
<p>Look for the Identifier <strong><a href="https://www.nirmata.io/security/api">https://www.nirmata.io/security/api</a></strong>.</p>
<p><img src="/images/adfs-12.png" alt="image"></p>
<p>Use this PowerShell command to disable CA certificate checks for
Nirmata:</p>
<pre><code>Get-AdfsRelyingPartyTrust -Identifier  https://www.nirmata.io/security/api/ | Set-AdfsRelyingPartyTrust -SigningCertificateRevocationCheck None -EncryptionCertificateRevocationCheck None
</code></pre>
<p><img src="/images/adfs-13.png" alt="image"></p>
<p>You should now be able to navigate to your AD FS login page and select
Nirmata (Nirmata Cloud Services). This will initiate the SAML SSO
exchange and authenticate your users with AD FS.</p>
<p><img src="/images/adfs-14.png" alt="image"></p>
<p>Alternatively, you can also sign in using your email address at:
<a href="https://nirmata.io/">https://nirmata.io/</a>.</p>
</div>
          
          <p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 01 Jan 0001</p>
          <nav class="pagination mt-3">
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            

            
            <a class="nav nav-prev" href="/settings/enable_saml_sso_for_a_user/"><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">Enable SAML SSO for a User</span></a>
            
            
            <a class="nav nav-next" href="/faq/"> <span class="d-none d-md-block">Frequently Asked Questions</span><i class="ti-arrow-right ml-2"></i></a>
            
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- /details page -->





    <!-- footer -->
<footer class="section pb-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8 text-md-left text-center">
       <p class="mb-md-0 mb-4">The Hugo Documents are copyright © <a href="https://gethugothemes.com/">gethugothemes</a> 2020.</p>
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline">
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-facebook"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-twitter-alt"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-github"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-linkedin"></i></a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Main Script -->

<script src="/js/script.min.js"></script>
  </body>

</html>